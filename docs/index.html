<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>PowerApps-like Sidebar</title>

    <link href="/projetos/.shared/assets/css/bootstrap.css" rel="stylesheet">
    <link href="/projetos/.shared/assets/css/all.fontAwesome.min.css" rel="stylesheet"> 

  <style>
    body {
      margin: 0;
      font-family: system-ui, sans-serif;
    }

    /* Sidebar */
    .sidebar {
      position: fixed;
      top: 0;
      left: 0;
      width: 60px;
      height: 100vh;
      background-color: #2c2c2c;
      border-right: 1px solid #1a1a1a;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: space-between;
      z-index: 1000;
      transition: width 0.3s;
    }

    .sidebar .top-section {
      width: 100%;
      padding-top: 1rem;
    }

    .sidebar .nav-item {
      width: 100%;
      color: #fff;
      padding: 0.75rem 0.5rem;
      display: flex;
      flex-direction: column;
      align-items: center;
      position: relative;
      cursor: pointer;
    }

    .sidebar .nav-item.active {
      background-color: #383838;
    }

    .sidebar .nav-item.active::before {
      content: '';
      position: absolute;
      left: 0;
      top: 0;
      width: 4px;
      height: 100%;
      background-color: #742774; /* PowerApps purple */
    }

    .sidebar .nav-item i {
      font-size: 1.25rem;
    }

    .sidebar .bottom-section {
      margin-bottom: 1rem;
      width: 100%;
      text-align: center;
    }

    .sidebar .bottom-section .nav-item {
      border-top: 1px solid #444;
      padding-top: 1rem;
    }

    /* Panel */
    .side-panel {
      position: fixed;
      top: 0;
      left: 60px;
      width: 300px;
      height: 100vh;
      background-color: #f8f9fa;
      border-right: 1px solid #ccc;
      display: none;
      flex-direction: column;
      z-index: 900;
      transition: transform 0.3s ease;
    }

    .side-panel.show {
      display: flex;
    }

    .side-panel .panel-header {
      padding: 1rem;
      background-color: #e0e0e0;
      border-bottom: 1px solid #ccc;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .side-panel .panel-header h6 {
      margin: 0;
      font-weight: 600;
    }

    .side-panel .panel-body {
      padding: 1rem;
      overflow-y: auto;
      flex-grow: 1;
    }

    /* Main content */
    .main-content {
      margin-left: 60px;
      padding: 2rem;
      transition: margin-left 0.3s;
    }

    .panel-open .main-content {
      margin-left: 360px; /* 60 + 300px panel */
    }

    .nav-item:hover {
      background-color: #3a3a3a;
    }

    .nav-item .label {
      font-size: 0.7rem;
      margin-top: 0.2rem;
    }

    .treeview li {
  margin-bottom: 0.3rem;
  cursor: pointer;
}

.treeview li span:hover {
  background-color: #e0e0e0;
  border-radius: 4px;
  padding-right: 5px;
}
  </style>
</head>
<body>
  <!-- Sidebar -->
  <div class="sidebar">
    <div class="top-section">
      <div class="nav-item active" data-panel="tree" onclick="openPanel(this)">
        <i class="fas fa-sitemap"></i>
        <div class="label">Tree</div>
      </div>
      <div class="nav-item" data-panel="insert" onclick="openPanel(this)">
        <i class="fas fa-plus-square"></i>
        <div class="label">Insert</div>
      </div>
      <div class="nav-item" data-panel="data" onclick="openPanel(this)">
        <i class="fas fa-database"></i>
        <div class="label">Data</div>
      </div>
      <div class="nav-item" data-panel="media" onclick="openPanel(this)">
        <i class="fas fa-photo-video"></i>
        <div class="label">Media</div>
      </div>
    </div>

    <div class="bottom-section">
      <div class="nav-item" data-panel="settings" onclick="openPanel(this)">
        <i class="fas fa-gear"></i>
        <div class="label">Settings</div>
      </div>
    </div>
  </div>

  <!-- Slide-out Panel -->
  <div id="sidePanel" class="side-panel">
    <div class="panel-header">
      <h6 id="panelTitle">Tree View</h6>
      <button class="btn btn-sm btn-outline-secondary" onclick="closePanel()">
        <i class="fas fa-times"></i>
      </button>
    </div>
    <div class="panel-body" id="panelBody">
      <!-- Dynamic Content -->
      <p>This is the content area for the selected panel.</p>
    </div>
  </div>

  <!-- Main Content -->
  <div id="mainContent" class="main-content">
    <h2>Canvas Area</h2>
    <p>This is the main canvas area, where your app is built.</p>
  </div>

<!-- JavaScript -->
<script>
  function toggleNode(el) {
    const caret = el.querySelector('.fa-caret-down, .fa-caret-right');
    const nextUL = el.nextElementSibling;

    // Toggle caret icon
    if (caret.classList.contains('fa-caret-down')) {
      caret.classList.remove('fa-caret-down');
      caret.classList.add('fa-caret-right');
    } else {
      caret.classList.remove('fa-caret-right');
      caret.classList.add('fa-caret-down');
    }

    // Toggle nested visibility
    nextUL.classList.toggle('d-none');
  }
</script>

 <script>
    function openPanel(el) {
      // Set active state
      document.querySelectorAll('.nav-item').forEach(item => item.classList.remove('active'));
      el.classList.add('active');

      // Show panel
      const panel = document.getElementById('sidePanel');
      panel.classList.add('show');
      document.body.classList.add('panel-open');

      // Set panel title/content
      const panelType = el.getAttribute('data-panel');
      const titleMap = {
        tree: 'Tree View',
        insert: 'Insert Items',
        data: 'Data Sources',
        media: 'Media Library',
        settings: 'Settings'
      };

      document.getElementById('panelTitle').textContent = titleMap[panelType] || 'Panel';

      // You can update this dynamically
      //document.getElementById('panelBody').innerHTML = `<p>Contents for <strong>${titleMap[panelType]}</strong> go here.</p>`;
      document.getElementById('panelBody').innerHTML = `<ul class="treeview list-unstyled ps-2">
  <li>
    <span class="tree-toggle" onclick="toggleNode(this)">
      <i class="fas fa-caret-down me-1"></i>
      <i class="fas fa-file-alt me-1"></i> Screen1
    </span>
    <ul class="nested list-unstyled ps-3">
      <li><i class="fas fa-font me-1"></i> Label1</li>
      <li><i class="fas fa-hand-pointer me-1"></i> Button1</li>
    </ul>
  </li>
  <li>
    <span class="tree-toggle" onclick="toggleNode(this)">
      <i class="fas fa-caret-right me-1"></i>
      <i class="fas fa-file-alt me-1"></i> Screen2
    </span>
    <ul class="nested list-unstyled ps-3 d-none">
      <li><i class="fas fa-image me-1"></i> Image1</li>
    </ul>
  </li>
</ul>
`;
    }

    function closePanel() {
      document.getElementById('sidePanel').classList.remove('show');
      document.body.classList.remove('panel-open');

      // Remove active state
      document.querySelectorAll('.nav-item').forEach(item => item.classList.remove('active'));
    }
  </script>

<!-- Bootstrap JS -->
<script src="/projetos/.shared/assets/js/bootstrap.bundle.min.js"></script>

</body>
</html>
